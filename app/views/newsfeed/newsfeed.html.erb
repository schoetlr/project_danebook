<%= render 'layouts/navbar' %>

<div class="row">

  <div class="col-md-4" id="active-friends-container">
    <div id="user-info" class="row">
      <div class="col-md-5">
        <%= image_tag(current_user.profile_photo.image.url(:thumb)) if current_user.profile_photo %>
      </div>
      <div class="col-md-7">
        <h3><%= link_to current_user.name, user_path(current_user) %></h3>
        <p><%= link_to "Edit User", edit_user_path(current_user) %></p>
      </div>
    </div>

    <% if @active_friends.count > 0 %>
      <h2>Active Friends</h2>
      <% @active_friends.each do |friend| %>

        <div class="row">
          <div class="col-md-3">
            <%= image_tag(friend.profile_photo.image.url(:thumb)) if friend.profile_photo %>
          </div>
          <div class="col-md-9">
            <h3><%= friend.name %></h3>
            <p>Posted on <%= friend.posts.last.date %></p>
          </div>
        </div>
      <% end %>
    <% end %>


  </div>

  <div class="col-md-8" id="newsfeed-container">

    <div id="newsfeed-post-form">
      <%= render partial: "post_form", locals: { :post => @post } %> 
    </div>


    <% @newsfeed.each do |item| %>
    <%# because these are posts set post = item, make photo = item if photo %>
    <% post = item %>
    <article class="row newsfeed-post">
      <header class="col-md-12">
        <div class="col-md-2">
          <%= image_tag(post.user.profile_photo.image.url(:thumb)) if post.user.profile_photo%>
        </div>
        <div class="col-md-10">
          <p><%= link_to post.user.name, user_path(post.user) %></p>
          <p class="date-posted">Posted on <%= post.created_at.strftime("%m-%d-%Y") %></p>
        </div>
      </header>

      <section class="col-md-12 post-body">
        <p><%= post.content %></p>
      </section>

      <section class ="col-md-12 like-section">
        <%= like_link_display(post) %>
        <a class="col-md-2" href = "#">Comment</a>
        <%= display_delete_link(post) %>
        <p class="col-md-12"><%= like_display(post) %></p>
      </section>


    <%= render partial: "comment_section", locals: { :post => post } %>

    </article><!--post 1-->
  <% end %><!-- end posts loop -->

</div>


  </div>






</div>